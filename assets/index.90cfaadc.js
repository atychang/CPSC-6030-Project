(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();function hn(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function Ti(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function Nr(t){let n,e,r;t.length!==2?(n=hn,e=(a,l)=>hn(t(a),l),r=(a,l)=>t(a)-l):(n=t===hn||t===Ti?t:zi,e=t,r=t);function i(a,l,f=0,s=a.length){if(f<s){if(n(l,l)!==0)return s;do{const c=f+s>>>1;e(a[c],l)<0?f=c+1:s=c}while(f<s)}return f}function o(a,l,f=0,s=a.length){if(f<s){if(n(l,l)!==0)return s;do{const c=f+s>>>1;e(a[c],l)<=0?f=c+1:s=c}while(f<s)}return f}function u(a,l,f=0,s=a.length){const c=i(a,l,f,s-1);return c>f&&r(a[c-1],l)>-r(a[c],l)?c-1:c}return{left:i,center:u,right:o}}function zi(){return 0}function Ri(t){return t===null?NaN:+t}const Pi=Nr(hn),Ci=Pi.right;Nr(Ri).center;const Ii=Ci;class St{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const e=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=e[i],u=n+o,a=Math.abs(n)<Math.abs(o)?n-(u-o):o-(u-n);a&&(e[r++]=a),n=u}return e[r]=n,this._n=r+1,this}valueOf(){const n=this._partials;let e=this._n,r,i,o,u=0;if(e>0){for(u=n[--e];e>0&&(r=u,i=n[--e],u=r+i,o=i-(u-r),!o););e>0&&(o<0&&n[e-1]<0||o>0&&n[e-1]>0)&&(i=o*2,r=u+i,i==r-u&&(u=r))}return u}}var Jn=Math.sqrt(50),jn=Math.sqrt(10),te=Math.sqrt(2);function Li(t,n,e){var r,i=-1,o,u,a;if(n=+n,t=+t,e=+e,t===n&&e>0)return[t];if((r=n<t)&&(o=t,t=n,n=o),(a=Ar(t,n,e))===0||!isFinite(a))return[];if(a>0){let l=Math.round(t/a),f=Math.round(n/a);for(l*a<t&&++l,f*a>n&&--f,u=new Array(o=f-l+1);++i<o;)u[i]=(l+i)*a}else{a=-a;let l=Math.round(t*a),f=Math.round(n*a);for(l/a<t&&++l,f/a>n&&--f,u=new Array(o=f-l+1);++i<o;)u[i]=(l+i)/a}return r&&u.reverse(),u}function Ar(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Jn?10:o>=jn?5:o>=te?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Jn?10:o>=jn?5:o>=te?2:1)}function Fi(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Jn?i*=10:o>=jn?i*=5:o>=te&&(i*=2),n<t?-i:i}function*Di(t){for(const n of t)yield*n}function kr(t){return Array.from(Di(t))}var qi={value:()=>{}};function Dn(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new pn(e)}function pn(t){this._=t}function Xi(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}pn.prototype=Dn.prototype={constructor:pn,on:function(t,n){var e=this._,r=Xi(t+"",e),i,o=-1,u=r.length;if(arguments.length<2){for(;++o<u;)if((i=(t=r[o]).type)&&(i=Hi(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<u;)if(i=(t=r[o]).type)e[i]=Fe(e[i],t.name,n);else if(n==null)for(i in e)e[i]=Fe(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new pn(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,o;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};function Hi(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function Fe(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=qi,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var ne="http://www.w3.org/1999/xhtml";const De={svg:"http://www.w3.org/2000/svg",xhtml:ne,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qn(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),De.hasOwnProperty(n)?{space:De[n],local:t}:t}function Oi(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===ne&&n.documentElement.namespaceURI===ne?n.createElement(t):n.createElementNS(e,t)}}function Yi(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function $r(t){var n=qn(t);return(n.local?Yi:Oi)(n)}function Bi(){}function Ne(t){return t==null?Bi:function(){return this.querySelector(t)}}function Vi(t){typeof t!="function"&&(t=Ne(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],u=o.length,a=r[i]=new Array(u),l,f,s=0;s<u;++s)(l=o[s])&&(f=t.call(l,l.__data__,s,o))&&("__data__"in l&&(f.__data__=l.__data__),a[s]=f);return new Z(r,this._parents)}function Gi(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ui(){return[]}function Tr(t){return t==null?Ui:function(){return this.querySelectorAll(t)}}function Ki(t){return function(){return Gi(t.apply(this,arguments))}}function Wi(t){typeof t=="function"?t=Ki(t):t=Tr(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var u=n[o],a=u.length,l,f=0;f<a;++f)(l=u[f])&&(r.push(t.call(l,l.__data__,f,u)),i.push(l));return new Z(r,i)}function zr(t){return function(){return this.matches(t)}}function Rr(t){return function(n){return n.matches(t)}}var Zi=Array.prototype.find;function Qi(t){return function(){return Zi.call(this.children,t)}}function Ji(){return this.firstElementChild}function ji(t){return this.select(t==null?Ji:Qi(typeof t=="function"?t:Rr(t)))}var to=Array.prototype.filter;function no(){return Array.from(this.children)}function eo(t){return function(){return to.call(this.children,t)}}function ro(t){return this.selectAll(t==null?no:eo(typeof t=="function"?t:Rr(t)))}function io(t){typeof t!="function"&&(t=zr(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],u=o.length,a=r[i]=[],l,f=0;f<u;++f)(l=o[f])&&t.call(l,l.__data__,f,o)&&a.push(l);return new Z(r,this._parents)}function Pr(t){return new Array(t.length)}function oo(){return new Z(this._enter||this._groups.map(Pr),this._parents)}function vn(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}vn.prototype={constructor:vn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function uo(t){return function(){return t}}function ao(t,n,e,r,i,o){for(var u=0,a,l=n.length,f=o.length;u<f;++u)(a=n[u])?(a.__data__=o[u],r[u]=a):e[u]=new vn(t,o[u]);for(;u<l;++u)(a=n[u])&&(i[u]=a)}function so(t,n,e,r,i,o,u){var a,l,f=new Map,s=n.length,c=o.length,h=new Array(s),g;for(a=0;a<s;++a)(l=n[a])&&(h[a]=g=u.call(l,l.__data__,a,n)+"",f.has(g)?i[a]=l:f.set(g,l));for(a=0;a<c;++a)g=u.call(t,o[a],a,o)+"",(l=f.get(g))?(r[a]=l,l.__data__=o[a],f.delete(g)):e[a]=new vn(t,o[a]);for(a=0;a<s;++a)(l=n[a])&&f.get(h[a])===l&&(i[a]=l)}function fo(t){return t.__data__}function co(t,n){if(!arguments.length)return Array.from(this,fo);var e=n?so:ao,r=this._parents,i=this._groups;typeof t!="function"&&(t=uo(t));for(var o=i.length,u=new Array(o),a=new Array(o),l=new Array(o),f=0;f<o;++f){var s=r[f],c=i[f],h=c.length,g=lo(t.call(s,s&&s.__data__,f,r)),v=g.length,E=a[f]=new Array(v),S=u[f]=new Array(v),w=l[f]=new Array(h);e(s,c,E,S,w,g,n);for(var N=0,A=0,y,x;N<v;++N)if(y=E[N]){for(N>=A&&(A=N+1);!(x=S[A])&&++A<v;);y._next=x||null}}return u=new Z(u,r),u._enter=a,u._exit=l,u}function lo(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ho(){return new Z(this._exit||this._groups.map(Pr),this._parents)}function po(t,n,e){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),n!=null&&(i=n(i),i&&(i=i.selection())),e==null?o.remove():e(o),r&&i?r.merge(i).order():i}function go(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,o=r.length,u=Math.min(i,o),a=new Array(i),l=0;l<u;++l)for(var f=e[l],s=r[l],c=f.length,h=a[l]=new Array(c),g,v=0;v<c;++v)(g=f[v]||s[v])&&(h[v]=g);for(;l<i;++l)a[l]=e[l];return new Z(a,this._parents)}function mo(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r=t[n],i=r.length-1,o=r[i],u;--i>=0;)(u=r[i])&&(o&&u.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(u,o),o=u);return this}function yo(t){t||(t=vo);function n(c,h){return c&&h?t(c.__data__,h.__data__):!c-!h}for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var u=e[o],a=u.length,l=i[o]=new Array(a),f,s=0;s<a;++s)(f=u[s])&&(l[s]=f);l.sort(n)}return new Z(i,this._parents).order()}function vo(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function wo(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function _o(){return Array.from(this)}function xo(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null}function So(){let t=0;for(const n of this)++t;return t}function Mo(){return!this.node()}function Eo(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,u=i.length,a;o<u;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function bo(t){return function(){this.removeAttribute(t)}}function No(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ao(t,n){return function(){this.setAttribute(t,n)}}function ko(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function $o(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function To(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function zo(t,n){var e=qn(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?No:bo:typeof n=="function"?e.local?To:$o:e.local?ko:Ao)(e,n))}function Cr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ro(t){return function(){this.style.removeProperty(t)}}function Po(t,n,e){return function(){this.style.setProperty(t,n,e)}}function Co(t,n,e){return function(){var r=n.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function Io(t,n,e){return arguments.length>1?this.each((n==null?Ro:typeof n=="function"?Co:Po)(t,n,e==null?"":e)):zt(this.node(),t)}function zt(t,n){return t.style.getPropertyValue(n)||Cr(t).getComputedStyle(t,null).getPropertyValue(n)}function Lo(t){return function(){delete this[t]}}function Fo(t,n){return function(){this[t]=n}}function Do(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function qo(t,n){return arguments.length>1?this.each((n==null?Lo:typeof n=="function"?Do:Fo)(t,n)):this.node()[t]}function Ir(t){return t.trim().split(/^|\s+/)}function Ae(t){return t.classList||new Lr(t)}function Lr(t){this._node=t,this._names=Ir(t.getAttribute("class")||"")}Lr.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Fr(t,n){for(var e=Ae(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function Dr(t,n){for(var e=Ae(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function Xo(t){return function(){Fr(this,t)}}function Ho(t){return function(){Dr(this,t)}}function Oo(t,n){return function(){(n.apply(this,arguments)?Fr:Dr)(this,t)}}function Yo(t,n){var e=Ir(t+"");if(arguments.length<2){for(var r=Ae(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof n=="function"?Oo:n?Xo:Ho)(e,n))}function Bo(){this.textContent=""}function Vo(t){return function(){this.textContent=t}}function Go(t){return function(){var n=t.apply(this,arguments);this.textContent=n==null?"":n}}function Uo(t){return arguments.length?this.each(t==null?Bo:(typeof t=="function"?Go:Vo)(t)):this.node().textContent}function Ko(){this.innerHTML=""}function Wo(t){return function(){this.innerHTML=t}}function Zo(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n==null?"":n}}function Qo(t){return arguments.length?this.each(t==null?Ko:(typeof t=="function"?Zo:Wo)(t)):this.node().innerHTML}function Jo(){this.nextSibling&&this.parentNode.appendChild(this)}function jo(){return this.each(Jo)}function tu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nu(){return this.each(tu)}function eu(t){var n=typeof t=="function"?t:$r(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function ru(){return null}function iu(t,n){var e=typeof t=="function"?t:$r(t),r=n==null?ru:typeof n=="function"?n:Ne(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function ou(){var t=this.parentNode;t&&t.removeChild(this)}function uu(){return this.each(ou)}function au(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function su(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function fu(t){return this.select(t?su:au)}function cu(t){return arguments.length?this.property("__data__",t):this.node().__data__}function lu(t){return function(n){t.call(this,n,this.__data__)}}function hu(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function pu(t){return function(){var n=this.__on;if(!!n){for(var e=0,r=-1,i=n.length,o;e<i;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):n[++r]=o;++r?n.length=r:delete this.__on}}}function gu(t,n,e){return function(){var r=this.__on,i,o=lu(n);if(r){for(var u=0,a=r.length;u<a;++u)if((i=r[u]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=e),i.value=n;return}}this.addEventListener(t.type,o,e),i={type:t.type,name:t.name,value:n,listener:o,options:e},r?r.push(i):this.__on=[i]}}function du(t,n,e){var r=hu(t+""),i,o=r.length,u;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,f=a.length,s;l<f;++l)for(i=0,s=a[l];i<o;++i)if((u=r[i]).type===s.type&&u.name===s.name)return s.value}return}for(a=n?gu:pu,i=0;i<o;++i)this.each(a(r[i],n,e));return this}function qr(t,n,e){var r=Cr(t),i=r.CustomEvent;typeof i=="function"?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function mu(t,n){return function(){return qr(this,t,n)}}function yu(t,n){return function(){return qr(this,t,n.apply(this,arguments))}}function vu(t,n){return this.each((typeof n=="function"?yu:mu)(t,n))}function*wu(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length,u;i<o;++i)(u=r[i])&&(yield u)}var Xr=[null];function Z(t,n){this._groups=t,this._parents=n}function jt(){return new Z([[document.documentElement]],Xr)}function _u(){return this}Z.prototype=jt.prototype={constructor:Z,select:Vi,selectAll:Wi,selectChild:ji,selectChildren:ro,filter:io,data:co,enter:oo,exit:ho,join:po,merge:go,selection:_u,order:mo,sort:yo,call:wo,nodes:_o,node:xo,size:So,empty:Mo,each:Eo,attr:zo,style:Io,property:qo,classed:Yo,text:Uo,html:Qo,raise:jo,lower:nu,append:eu,insert:iu,remove:uu,clone:fu,datum:cu,on:du,dispatch:vu,[Symbol.iterator]:wu};function U(t){return typeof t=="string"?new Z([[document.querySelector(t)]],[document.documentElement]):new Z([[t]],Xr)}function xu(t){let n;for(;n=t.sourceEvent;)t=n;return t}function pt(t,n){if(t=xu(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}const Su={passive:!1},Kt={capture:!0,passive:!1};function Bn(t){t.stopImmediatePropagation()}function $t(t){t.preventDefault(),t.stopImmediatePropagation()}function Hr(t){var n=t.document.documentElement,e=U(t).on("dragstart.drag",$t,Kt);"onselectstart"in n?e.on("selectstart.drag",$t,Kt):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Or(t,n){var e=t.document.documentElement,r=U(t).on("dragstart.drag",null);n&&(r.on("click.drag",$t,Kt),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const nn=t=>()=>t;function ee(t,{sourceEvent:n,subject:e,target:r,identifier:i,active:o,x:u,y:a,dx:l,dy:f,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:s}})}ee.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Mu(t){return!t.ctrlKey&&!t.button}function Eu(){return this.parentNode}function bu(t,n){return n==null?{x:t.x,y:t.y}:n}function Nu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Au(){var t=Mu,n=Eu,e=bu,r=Nu,i={},o=Dn("start","drag","end"),u=0,a,l,f,s,c=0;function h(y){y.on("mousedown.drag",g).filter(r).on("touchstart.drag",S).on("touchmove.drag",w,Su).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(y,x){if(!(s||!t.call(this,y,x))){var b=A(this,n.call(this,y,x),y,x,"mouse");!b||(U(y.view).on("mousemove.drag",v,Kt).on("mouseup.drag",E,Kt),Hr(y.view),Bn(y),f=!1,a=y.clientX,l=y.clientY,b("start",y))}}function v(y){if($t(y),!f){var x=y.clientX-a,b=y.clientY-l;f=x*x+b*b>c}i.mouse("drag",y)}function E(y){U(y.view).on("mousemove.drag mouseup.drag",null),Or(y.view,f),$t(y),i.mouse("end",y)}function S(y,x){if(!!t.call(this,y,x)){var b=y.changedTouches,T=n.call(this,y,x),z=b.length,R,C;for(R=0;R<z;++R)(C=A(this,T,y,x,b[R].identifier,b[R]))&&(Bn(y),C("start",y,b[R]))}}function w(y){var x=y.changedTouches,b=x.length,T,z;for(T=0;T<b;++T)(z=i[x[T].identifier])&&($t(y),z("drag",y,x[T]))}function N(y){var x=y.changedTouches,b=x.length,T,z;for(s&&clearTimeout(s),s=setTimeout(function(){s=null},500),T=0;T<b;++T)(z=i[x[T].identifier])&&(Bn(y),z("end",y,x[T]))}function A(y,x,b,T,z,R){var C=o.copy(),_=pt(R||b,x),q,I,p;if((p=e.call(y,new ee("beforestart",{sourceEvent:b,target:h,identifier:z,active:u,x:_[0],y:_[1],dx:0,dy:0,dispatch:C}),T))!=null)return q=p.x-_[0]||0,I=p.y-_[1]||0,function d(m,M,k){var $=_,P;switch(m){case"start":i[z]=d,P=u++;break;case"end":delete i[z],--u;case"drag":_=pt(k||M,x),P=u;break}C.call(m,y,new ee(m,{sourceEvent:M,subject:p,target:h,identifier:z,active:P,x:_[0]+q,y:_[1]+I,dx:_[0]-$[0],dy:_[1]-$[1],dispatch:C}),T)}}return h.filter=function(y){return arguments.length?(t=typeof y=="function"?y:nn(!!y),h):t},h.container=function(y){return arguments.length?(n=typeof y=="function"?y:nn(y),h):n},h.subject=function(y){return arguments.length?(e=typeof y=="function"?y:nn(y),h):e},h.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:nn(!!y),h):r},h.on=function(){var y=o.on.apply(o,arguments);return y===o?h:y},h.clickDistance=function(y){return arguments.length?(c=(y=+y)*y,h):Math.sqrt(c)},h}function ke(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function Yr(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function tn(){}var Wt=.7,wn=1/Wt,Tt="\\s*([+-]?\\d+)\\s*",Zt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",at="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ku=/^#([0-9a-f]{3,8})$/,$u=new RegExp(`^rgb\\(${Tt},${Tt},${Tt}\\)$`),Tu=new RegExp(`^rgb\\(${at},${at},${at}\\)$`),zu=new RegExp(`^rgba\\(${Tt},${Tt},${Tt},${Zt}\\)$`),Ru=new RegExp(`^rgba\\(${at},${at},${at},${Zt}\\)$`),Pu=new RegExp(`^hsl\\(${Zt},${at},${at}\\)$`),Cu=new RegExp(`^hsla\\(${Zt},${at},${at},${Zt}\\)$`),qe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ke(tn,Mt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Xe,formatHex:Xe,formatHex8:Iu,formatHsl:Lu,formatRgb:He,toString:He});function Xe(){return this.rgb().formatHex()}function Iu(){return this.rgb().formatHex8()}function Lu(){return Br(this).formatHsl()}function He(){return this.rgb().formatRgb()}function Mt(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=ku.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?Oe(n):e===3?new K(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?en(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?en(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=$u.exec(t))?new K(n[1],n[2],n[3],1):(n=Tu.exec(t))?new K(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=zu.exec(t))?en(n[1],n[2],n[3],n[4]):(n=Ru.exec(t))?en(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Pu.exec(t))?Ve(n[1],n[2]/100,n[3]/100,1):(n=Cu.exec(t))?Ve(n[1],n[2]/100,n[3]/100,n[4]):qe.hasOwnProperty(t)?Oe(qe[t]):t==="transparent"?new K(NaN,NaN,NaN,0):null}function Oe(t){return new K(t>>16&255,t>>8&255,t&255,1)}function en(t,n,e,r){return r<=0&&(t=n=e=NaN),new K(t,n,e,r)}function Fu(t){return t instanceof tn||(t=Mt(t)),t?(t=t.rgb(),new K(t.r,t.g,t.b,t.opacity)):new K}function _n(t,n,e,r){return arguments.length===1?Fu(t):new K(t,n,e,r==null?1:r)}function K(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}ke(K,_n,Yr(tn,{brighter(t){return t=t==null?wn:Math.pow(wn,t),new K(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Wt:Math.pow(Wt,t),new K(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new K(xt(this.r),xt(this.g),xt(this.b),xn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ye,formatHex:Ye,formatHex8:Du,formatRgb:Be,toString:Be}));function Ye(){return`#${_t(this.r)}${_t(this.g)}${_t(this.b)}`}function Du(){return`#${_t(this.r)}${_t(this.g)}${_t(this.b)}${_t((isNaN(this.opacity)?1:this.opacity)*255)}`}function Be(){const t=xn(this.opacity);return`${t===1?"rgb(":"rgba("}${xt(this.r)}, ${xt(this.g)}, ${xt(this.b)}${t===1?")":`, ${t})`}`}function xn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function xt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function _t(t){return t=xt(t),(t<16?"0":"")+t.toString(16)}function Ve(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new et(t,n,e,r)}function Br(t){if(t instanceof et)return new et(t.h,t.s,t.l,t.opacity);if(t instanceof tn||(t=Mt(t)),!t)return new et;if(t instanceof et)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),u=NaN,a=o-i,l=(o+i)/2;return a?(n===o?u=(e-r)/a+(e<r)*6:e===o?u=(r-n)/a+2:u=(n-e)/a+4,a/=l<.5?o+i:2-o-i,u*=60):a=l>0&&l<1?0:u,new et(u,a,l,t.opacity)}function qu(t,n,e,r){return arguments.length===1?Br(t):new et(t,n,e,r==null?1:r)}function et(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}ke(et,qu,Yr(tn,{brighter(t){return t=t==null?wn:Math.pow(wn,t),new et(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Wt:Math.pow(Wt,t),new et(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new K(Vn(t>=240?t-240:t+120,i,r),Vn(t,i,r),Vn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new et(Ge(this.h),rn(this.s),rn(this.l),xn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=xn(this.opacity);return`${t===1?"hsl(":"hsla("}${Ge(this.h)}, ${rn(this.s)*100}%, ${rn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ge(t){return t=(t||0)%360,t<0?t+360:t}function rn(t){return Math.max(0,Math.min(1,t||0))}function Vn(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}function Xu(t,n,e,r,i){var o=t*t,u=o*t;return((1-3*t+3*o-u)*n+(4-6*o+3*u)*e+(1+3*t+3*o-3*u)*r+u*i)/6}function Hu(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],o=t[r+1],u=r>0?t[r-1]:2*i-o,a=r<n-1?t[r+2]:2*o-i;return Xu((e-r/n)*n,u,i,o,a)}}const $e=t=>()=>t;function Ou(t,n){return function(e){return t+e*n}}function Yu(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function Bu(t){return(t=+t)==1?Vr:function(n,e){return e-n?Yu(n,e,t):$e(isNaN(n)?e:n)}}function Vr(t,n){var e=n-t;return e?Ou(t,e):$e(isNaN(t)?n:t)}const Sn=function t(n){var e=Bu(n);function r(i,o){var u=e((i=_n(i)).r,(o=_n(o)).r),a=e(i.g,o.g),l=e(i.b,o.b),f=Vr(i.opacity,o.opacity);return function(s){return i.r=u(s),i.g=a(s),i.b=l(s),i.opacity=f(s),i+""}}return r.gamma=t,r}(1);function Vu(t){return function(n){var e=n.length,r=new Array(e),i=new Array(e),o=new Array(e),u,a;for(u=0;u<e;++u)a=_n(n[u]),r[u]=a.r||0,i[u]=a.g||0,o[u]=a.b||0;return r=t(r),i=t(i),o=t(o),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=o(l),a+""}}}var Gu=Vu(Hu);function Uu(t,n){n||(n=[]);var e=t?Math.min(n.length,t.length):0,r=n.slice(),i;return function(o){for(i=0;i<e;++i)r[i]=t[i]*(1-o)+n[i]*o;return r}}function Ku(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Wu(t,n){var e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),o=new Array(e),u;for(u=0;u<r;++u)i[u]=Xn(t[u],n[u]);for(;u<e;++u)o[u]=n[u];return function(a){for(u=0;u<r;++u)o[u]=i[u](a);return o}}function Zu(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function nt(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function Qu(t,n){var e={},r={},i;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in t?e[i]=Xn(t[i],n[i]):r[i]=n[i];return function(o){for(i in e)r[i]=e[i](o);return r}}var re=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gn=new RegExp(re.source,"g");function Ju(t){return function(){return t}}function ju(t){return function(n){return t(n)+""}}function Gr(t,n){var e=re.lastIndex=Gn.lastIndex=0,r,i,o,u=-1,a=[],l=[];for(t=t+"",n=n+"";(r=re.exec(t))&&(i=Gn.exec(n));)(o=i.index)>e&&(o=n.slice(e,o),a[u]?a[u]+=o:a[++u]=o),(r=r[0])===(i=i[0])?a[u]?a[u]+=i:a[++u]=i:(a[++u]=null,l.push({i:u,x:nt(r,i)})),e=Gn.lastIndex;return e<n.length&&(o=n.slice(e),a[u]?a[u]+=o:a[++u]=o),a.length<2?l[0]?ju(l[0].x):Ju(n):(n=l.length,function(f){for(var s=0,c;s<n;++s)a[(c=l[s]).i]=c.x(f);return a.join("")})}function Xn(t,n){var e=typeof n,r;return n==null||e==="boolean"?$e(n):(e==="number"?nt:e==="string"?(r=Mt(n))?(n=r,Sn):Gr:n instanceof Mt?Sn:n instanceof Date?Zu:Ku(n)?Uu:Array.isArray(n)?Wu:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Qu:nt)(t,n)}function Ur(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var Ue=180/Math.PI,ie={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Kr(t,n,e,r,i,o){var u,a,l;return(u=Math.sqrt(t*t+n*n))&&(t/=u,n/=u),(l=t*e+n*r)&&(e-=t*l,r-=n*l),(a=Math.sqrt(e*e+r*r))&&(e/=a,r/=a,l/=a),t*r<n*e&&(t=-t,n=-n,l=-l,u=-u),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*Ue,skewX:Math.atan(l)*Ue,scaleX:u,scaleY:a}}var on;function ta(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?ie:Kr(n.a,n.b,n.c,n.d,n.e,n.f)}function na(t){return t==null||(on||(on=document.createElementNS("http://www.w3.org/2000/svg","g")),on.setAttribute("transform",t),!(t=on.transform.baseVal.consolidate()))?ie:(t=t.matrix,Kr(t.a,t.b,t.c,t.d,t.e,t.f))}function Wr(t,n,e,r){function i(f){return f.length?f.pop()+" ":""}function o(f,s,c,h,g,v){if(f!==c||s!==h){var E=g.push("translate(",null,n,null,e);v.push({i:E-4,x:nt(f,c)},{i:E-2,x:nt(s,h)})}else(c||h)&&g.push("translate("+c+n+h+e)}function u(f,s,c,h){f!==s?(f-s>180?s+=360:s-f>180&&(f+=360),h.push({i:c.push(i(c)+"rotate(",null,r)-2,x:nt(f,s)})):s&&c.push(i(c)+"rotate("+s+r)}function a(f,s,c,h){f!==s?h.push({i:c.push(i(c)+"skewX(",null,r)-2,x:nt(f,s)}):s&&c.push(i(c)+"skewX("+s+r)}function l(f,s,c,h,g,v){if(f!==c||s!==h){var E=g.push(i(g)+"scale(",null,",",null,")");v.push({i:E-4,x:nt(f,c)},{i:E-2,x:nt(s,h)})}else(c!==1||h!==1)&&g.push(i(g)+"scale("+c+","+h+")")}return function(f,s){var c=[],h=[];return f=t(f),s=t(s),o(f.translateX,f.translateY,s.translateX,s.translateY,c,h),u(f.rotate,s.rotate,c,h),a(f.skewX,s.skewX,c,h),l(f.scaleX,f.scaleY,s.scaleX,s.scaleY,c,h),f=s=null,function(g){for(var v=-1,E=h.length,S;++v<E;)c[(S=h[v]).i]=S.x(g);return c.join("")}}}var ea=Wr(ta,"px, ","px)","deg)"),ra=Wr(na,", ",")",")"),ia=1e-12;function Ke(t){return((t=Math.exp(t))+1/t)/2}function oa(t){return((t=Math.exp(t))-1/t)/2}function ua(t){return((t=Math.exp(2*t))-1)/(t+1)}const aa=function t(n,e,r){function i(o,u){var a=o[0],l=o[1],f=o[2],s=u[0],c=u[1],h=u[2],g=s-a,v=c-l,E=g*g+v*v,S,w;if(E<ia)w=Math.log(h/f)/n,S=function(T){return[a+T*g,l+T*v,f*Math.exp(n*T*w)]};else{var N=Math.sqrt(E),A=(h*h-f*f+r*E)/(2*f*e*N),y=(h*h-f*f-r*E)/(2*h*e*N),x=Math.log(Math.sqrt(A*A+1)-A),b=Math.log(Math.sqrt(y*y+1)-y);w=(b-x)/n,S=function(T){var z=T*w,R=Ke(x),C=f/(e*N)*(R*ua(n*z+x)-oa(x));return[a+C*g,l+C*v,f*R/Ke(n*z+x)]}}return S.duration=w*1e3*n/Math.SQRT2,S}return i.rho=function(o){var u=Math.max(.001,+o),a=u*u,l=a*a;return t(u,a,l)},i}(Math.SQRT2,2,4);var Rt=0,qt=0,Ft=0,Zr=1e3,Mn,Xt,En=0,Et=0,Hn=0,Qt=typeof performance=="object"&&performance.now?performance:Date,Qr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Te(){return Et||(Qr(sa),Et=Qt.now()+Hn)}function sa(){Et=0}function bn(){this._call=this._time=this._next=null}bn.prototype=Jr.prototype={constructor:bn,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?Te():+e)+(n==null?0:+n),!this._next&&Xt!==this&&(Xt?Xt._next=this:Mn=this,Xt=this),this._call=t,this._time=e,oe()},stop:function(){this._call&&(this._call=null,this._time=1/0,oe())}};function Jr(t,n,e){var r=new bn;return r.restart(t,n,e),r}function fa(){Te(),++Rt;for(var t=Mn,n;t;)(n=Et-t._time)>=0&&t._call.call(void 0,n),t=t._next;--Rt}function We(){Et=(En=Qt.now())+Hn,Rt=qt=0;try{fa()}finally{Rt=0,la(),Et=0}}function ca(){var t=Qt.now(),n=t-En;n>Zr&&(Hn-=n,En=t)}function la(){for(var t,n=Mn,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Mn=e);Xt=t,oe(r)}function oe(t){if(!Rt){qt&&(qt=clearTimeout(qt));var n=t-Et;n>24?(t<1/0&&(qt=setTimeout(We,t-Qt.now()-Hn)),Ft&&(Ft=clearInterval(Ft))):(Ft||(En=Qt.now(),Ft=setInterval(ca,Zr)),Rt=1,Qr(We))}}function Ze(t,n,e){var r=new bn;return n=n==null?0:+n,r.restart(i=>{r.stop(),t(i+n)},n,e),r}var ha=Dn("start","end","cancel","interrupt"),pa=[],jr=0,Qe=1,ue=2,gn=3,Je=4,ae=5,dn=6;function On(t,n,e,r,i,o){var u=t.__transition;if(!u)t.__transition={};else if(e in u)return;ga(t,e,{name:n,index:r,group:i,on:ha,tween:pa,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:jr})}function ze(t,n){var e=it(t,n);if(e.state>jr)throw new Error("too late; already scheduled");return e}function st(t,n){var e=it(t,n);if(e.state>gn)throw new Error("too late; already running");return e}function it(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function ga(t,n,e){var r=t.__transition,i;r[n]=e,e.timer=Jr(o,0,e.time);function o(f){e.state=Qe,e.timer.restart(u,e.delay,e.time),e.delay<=f&&u(f-e.delay)}function u(f){var s,c,h,g;if(e.state!==Qe)return l();for(s in r)if(g=r[s],g.name===e.name){if(g.state===gn)return Ze(u);g.state===Je?(g.state=dn,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[s]):+s<n&&(g.state=dn,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[s])}if(Ze(function(){e.state===gn&&(e.state=Je,e.timer.restart(a,e.delay,e.time),a(f))}),e.state=ue,e.on.call("start",t,t.__data__,e.index,e.group),e.state===ue){for(e.state=gn,i=new Array(h=e.tween.length),s=0,c=-1;s<h;++s)(g=e.tween[s].value.call(t,t.__data__,e.index,e.group))&&(i[++c]=g);i.length=c+1}}function a(f){for(var s=f<e.duration?e.ease.call(null,f/e.duration):(e.timer.restart(l),e.state=ae,1),c=-1,h=i.length;++c<h;)i[c].call(t,s);e.state===ae&&(e.on.call("end",t,t.__data__,e.index,e.group),l())}function l(){e.state=dn,e.timer.stop(),delete r[n];for(var f in r)return;delete t.__transition}}function mn(t,n){var e=t.__transition,r,i,o=!0,u;if(!!e){n=n==null?null:n+"";for(u in e){if((r=e[u]).name!==n){o=!1;continue}i=r.state>ue&&r.state<ae,r.state=dn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete e[u]}o&&delete t.__transition}}function da(t){return this.each(function(){mn(this,t)})}function ma(t,n){var e,r;return function(){var i=st(this,t),o=i.tween;if(o!==e){r=e=o;for(var u=0,a=r.length;u<a;++u)if(r[u].name===n){r=r.slice(),r.splice(u,1);break}}i.tween=r}}function ya(t,n,e){var r,i;if(typeof e!="function")throw new Error;return function(){var o=st(this,t),u=o.tween;if(u!==r){i=(r=u).slice();for(var a={name:n,value:e},l=0,f=i.length;l<f;++l)if(i[l].name===n){i[l]=a;break}l===f&&i.push(a)}o.tween=i}}function va(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r=it(this.node(),e).tween,i=0,o=r.length,u;i<o;++i)if((u=r[i]).name===t)return u.value;return null}return this.each((n==null?ma:ya)(e,t,n))}function Re(t,n,e){var r=t._id;return t.each(function(){var i=st(this,r);(i.value||(i.value={}))[n]=e.apply(this,arguments)}),function(i){return it(i,r).value[n]}}function ti(t,n){var e;return(typeof n=="number"?nt:n instanceof Mt?Sn:(e=Mt(n))?(n=e,Sn):Gr)(t,n)}function wa(t){return function(){this.removeAttribute(t)}}function _a(t){return function(){this.removeAttributeNS(t.space,t.local)}}function xa(t,n,e){var r,i=e+"",o;return function(){var u=this.getAttribute(t);return u===i?null:u===r?o:o=n(r=u,e)}}function Sa(t,n,e){var r,i=e+"",o;return function(){var u=this.getAttributeNS(t.space,t.local);return u===i?null:u===r?o:o=n(r=u,e)}}function Ma(t,n,e){var r,i,o;return function(){var u,a=e(this),l;return a==null?void this.removeAttribute(t):(u=this.getAttribute(t),l=a+"",u===l?null:u===r&&l===i?o:(i=l,o=n(r=u,a)))}}function Ea(t,n,e){var r,i,o;return function(){var u,a=e(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(u=this.getAttributeNS(t.space,t.local),l=a+"",u===l?null:u===r&&l===i?o:(i=l,o=n(r=u,a)))}}function ba(t,n){var e=qn(t),r=e==="transform"?ra:ti;return this.attrTween(t,typeof n=="function"?(e.local?Ea:Ma)(e,r,Re(this,"attr."+t,n)):n==null?(e.local?_a:wa)(e):(e.local?Sa:xa)(e,r,n))}function Na(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function Aa(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function ka(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&Aa(t,o)),e}return i._value=n,i}function $a(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&Na(t,o)),e}return i._value=n,i}function Ta(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var r=qn(t);return this.tween(e,(r.local?ka:$a)(r,n))}function za(t,n){return function(){ze(this,t).delay=+n.apply(this,arguments)}}function Ra(t,n){return n=+n,function(){ze(this,t).delay=n}}function Pa(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?za:Ra)(n,t)):it(this.node(),n).delay}function Ca(t,n){return function(){st(this,t).duration=+n.apply(this,arguments)}}function Ia(t,n){return n=+n,function(){st(this,t).duration=n}}function La(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Ca:Ia)(n,t)):it(this.node(),n).duration}function Fa(t,n){if(typeof n!="function")throw new Error;return function(){st(this,t).ease=n}}function Da(t){var n=this._id;return arguments.length?this.each(Fa(n,t)):it(this.node(),n).ease}function qa(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;st(this,t).ease=e}}function Xa(t){if(typeof t!="function")throw new Error;return this.each(qa(this._id,t))}function Ha(t){typeof t!="function"&&(t=zr(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],u=o.length,a=r[i]=[],l,f=0;f<u;++f)(l=o[f])&&t.call(l,l.__data__,f,o)&&a.push(l);return new mt(r,this._parents,this._name,this._id)}function Oa(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var l=n[a],f=e[a],s=l.length,c=u[a]=new Array(s),h,g=0;g<s;++g)(h=l[g]||f[g])&&(c[g]=h);for(;a<r;++a)u[a]=n[a];return new mt(u,this._parents,this._name,this._id)}function Ya(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function Ba(t,n,e){var r,i,o=Ya(n)?ze:st;return function(){var u=o(this,t),a=u.on;a!==r&&(i=(r=a).copy()).on(n,e),u.on=i}}function Va(t,n){var e=this._id;return arguments.length<2?it(this.node(),e).on.on(t):this.each(Ba(e,t,n))}function Ga(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function Ua(){return this.on("end.remove",Ga(this._id))}function Ka(t){var n=this._name,e=this._id;typeof t!="function"&&(t=Ne(t));for(var r=this._groups,i=r.length,o=new Array(i),u=0;u<i;++u)for(var a=r[u],l=a.length,f=o[u]=new Array(l),s,c,h=0;h<l;++h)(s=a[h])&&(c=t.call(s,s.__data__,h,a))&&("__data__"in s&&(c.__data__=s.__data__),f[h]=c,On(f[h],n,e,h,f,it(s,e)));return new mt(o,this._parents,n,e)}function Wa(t){var n=this._name,e=this._id;typeof t!="function"&&(t=Tr(t));for(var r=this._groups,i=r.length,o=[],u=[],a=0;a<i;++a)for(var l=r[a],f=l.length,s,c=0;c<f;++c)if(s=l[c]){for(var h=t.call(s,s.__data__,c,l),g,v=it(s,e),E=0,S=h.length;E<S;++E)(g=h[E])&&On(g,n,e,E,h,v);o.push(h),u.push(s)}return new mt(o,u,n,e)}var Za=jt.prototype.constructor;function Qa(){return new Za(this._groups,this._parents)}function Ja(t,n){var e,r,i;return function(){var o=zt(this,t),u=(this.style.removeProperty(t),zt(this,t));return o===u?null:o===e&&u===r?i:i=n(e=o,r=u)}}function ni(t){return function(){this.style.removeProperty(t)}}function ja(t,n,e){var r,i=e+"",o;return function(){var u=zt(this,t);return u===i?null:u===r?o:o=n(r=u,e)}}function ts(t,n,e){var r,i,o;return function(){var u=zt(this,t),a=e(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),zt(this,t))),u===l?null:u===r&&l===i?o:(i=l,o=n(r=u,a))}}function ns(t,n){var e,r,i,o="style."+n,u="end."+o,a;return function(){var l=st(this,t),f=l.on,s=l.value[o]==null?a||(a=ni(n)):void 0;(f!==e||i!==s)&&(r=(e=f).copy()).on(u,i=s),l.on=r}}function es(t,n,e){var r=(t+="")=="transform"?ea:ti;return n==null?this.styleTween(t,Ja(t,r)).on("end.style."+t,ni(t)):typeof n=="function"?this.styleTween(t,ts(t,r,Re(this,"style."+t,n))).each(ns(this._id,t)):this.styleTween(t,ja(t,r,n),e).on("end.style."+t,null)}function rs(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function is(t,n,e){var r,i;function o(){var u=n.apply(this,arguments);return u!==i&&(r=(i=u)&&rs(t,u,e)),r}return o._value=n,o}function os(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;return this.tween(r,is(t,n,e==null?"":e))}function us(t){return function(){this.textContent=t}}function as(t){return function(){var n=t(this);this.textContent=n==null?"":n}}function ss(t){return this.tween("text",typeof t=="function"?as(Re(this,"text",t)):us(t==null?"":t+""))}function fs(t){return function(n){this.textContent=t.call(this,n)}}function cs(t){var n,e;function r(){var i=t.apply(this,arguments);return i!==e&&(n=(e=i)&&fs(i)),n}return r._value=t,r}function ls(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,cs(t))}function hs(){for(var t=this._name,n=this._id,e=ei(),r=this._groups,i=r.length,o=0;o<i;++o)for(var u=r[o],a=u.length,l,f=0;f<a;++f)if(l=u[f]){var s=it(l,n);On(l,t,e,f,u,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new mt(r,this._parents,t,e)}function ps(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(o,u){var a={value:u},l={value:function(){--i===0&&o()}};e.each(function(){var f=st(this,r),s=f.on;s!==t&&(n=(t=s).copy(),n._.cancel.push(a),n._.interrupt.push(a),n._.end.push(l)),f.on=n}),i===0&&o()})}var gs=0;function mt(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function ei(){return++gs}var lt=jt.prototype;mt.prototype={constructor:mt,select:Ka,selectAll:Wa,selectChild:lt.selectChild,selectChildren:lt.selectChildren,filter:Ha,merge:Oa,selection:Qa,transition:hs,call:lt.call,nodes:lt.nodes,node:lt.node,size:lt.size,empty:lt.empty,each:lt.each,on:Va,attr:ba,attrTween:Ta,style:es,styleTween:os,text:ss,textTween:ls,remove:Ua,tween:va,delay:Pa,duration:La,ease:Da,easeVarying:Xa,end:ps,[Symbol.iterator]:lt[Symbol.iterator]};function ds(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ms={time:null,delay:0,duration:250,ease:ds};function ys(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function vs(t){var n,e;t instanceof mt?(n=t._id,t=t._name):(n=ei(),(e=ms).time=Te(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var u=r[o],a=u.length,l,f=0;f<a;++f)(l=u[f])&&On(l,t,n,f,u,e||ys(l,n));return new mt(r,this._parents,t,n)}jt.prototype.interrupt=da;jt.prototype.transition=vs;function ws(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function se(t,n){return fetch(t,n).then(ws)}function _s(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Nn(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function Pt(t){return t=Nn(Math.abs(t)),t?t[1]:NaN}function xs(t,n){return function(e,r){for(var i=e.length,o=[],u=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(e.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[u=(u+1)%t.length];return o.reverse().join(n)}}function Ss(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}var Ms=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function An(t){if(!(n=Ms.exec(t)))throw new Error("invalid format: "+t);var n;return new Pe({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}An.prototype=Pe.prototype;function Pe(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Pe.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Es(t){t:for(var n=t.length,e=1,r=-1,i;e<n;++e)switch(t[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+t[e])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var ri;function bs(t,n){var e=Nn(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(ri=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,u=r.length;return o===u?r:o>u?r+new Array(o-u+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Nn(t,Math.max(0,n+o-1))[0]}function je(t,n){var e=Nn(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const tr={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:_s,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>je(t*100,n),r:je,s:bs,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function nr(t){return t}var er=Array.prototype.map,rr=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Ns(t){var n=t.grouping===void 0||t.thousands===void 0?nr:xs(er.call(t.grouping,Number),t.thousands+""),e=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?nr:Ss(er.call(t.numerals,String)),u=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"\u2212":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function f(c){c=An(c);var h=c.fill,g=c.align,v=c.sign,E=c.symbol,S=c.zero,w=c.width,N=c.comma,A=c.precision,y=c.trim,x=c.type;x==="n"?(N=!0,x="g"):tr[x]||(A===void 0&&(A=12),y=!0,x="g"),(S||h==="0"&&g==="=")&&(S=!0,h="0",g="=");var b=E==="$"?e:E==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",T=E==="$"?r:/[%p]/.test(x)?u:"",z=tr[x],R=/[defgprs%]/.test(x);A=A===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function C(_){var q=b,I=T,p,d,m;if(x==="c")I=z(_)+I,_="";else{_=+_;var M=_<0||1/_<0;if(_=isNaN(_)?l:z(Math.abs(_),A),y&&(_=Es(_)),M&&+_==0&&v!=="+"&&(M=!1),q=(M?v==="("?v:a:v==="-"||v==="("?"":v)+q,I=(x==="s"?rr[8+ri/3]:"")+I+(M&&v==="("?")":""),R){for(p=-1,d=_.length;++p<d;)if(m=_.charCodeAt(p),48>m||m>57){I=(m===46?i+_.slice(p+1):_.slice(p))+I,_=_.slice(0,p);break}}}N&&!S&&(_=n(_,1/0));var k=q.length+_.length+I.length,$=k<w?new Array(w-k+1).join(h):"";switch(N&&S&&(_=n($+_,$.length?w-I.length:1/0),$=""),g){case"<":_=q+_+I+$;break;case"=":_=q+$+_+I;break;case"^":_=$.slice(0,k=$.length>>1)+q+_+I+$.slice(k);break;default:_=$+q+_+I;break}return o(_)}return C.toString=function(){return c+""},C}function s(c,h){var g=f((c=An(c),c.type="f",c)),v=Math.max(-8,Math.min(8,Math.floor(Pt(h)/3)))*3,E=Math.pow(10,-v),S=rr[8+v/3];return function(w){return g(E*w)+S}}return{format:f,formatPrefix:s}}var un,ii,oi;As({thousands:",",grouping:[3],currency:["$",""]});function As(t){return un=Ns(t),ii=un.format,oi=un.formatPrefix,un}function ks(t){return Math.max(0,-Pt(Math.abs(t)))}function $s(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Pt(n)/3)))*3-Pt(Math.abs(t)))}function Ts(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,Pt(n)-Pt(t))+1}var X=1e-6,zs=1e-12,F=Math.PI,Q=F/2,ir=F/4,j=F*2,ht=180/F,W=F/180,B=Math.abs,Rs=Math.atan,Ct=Math.atan2,O=Math.cos,H=Math.sin,Ps=Math.sign||function(t){return t>0?1:t<0?-1:0},wt=Math.sqrt;function Cs(t){return t>1?0:t<-1?F:Math.acos(t)}function bt(t){return t>1?Q:t<-1?-Q:Math.asin(t)}function J(){}function kn(t,n){t&&ur.hasOwnProperty(t.type)&&ur[t.type](t,n)}var or={Feature:function(t,n){kn(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)kn(e[r].geometry,n)}},ur={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){fe(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)fe(e[r],n,0)},Polygon:function(t,n){ar(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)ar(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)kn(e[r],n)}};function fe(t,n,e){var r=-1,i=t.length-e,o;for(n.lineStart();++r<i;)o=t[r],n.point(o[0],o[1],o[2]);n.lineEnd()}function ar(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)fe(t[e],n,1);n.polygonEnd()}function At(t,n){t&&or.hasOwnProperty(t.type)?or[t.type](t,n):kn(t,n)}function ce(t){return[Ct(t[1],t[0]),bt(t[2])]}function It(t){var n=t[0],e=t[1],r=O(e);return[r*O(n),r*H(n),H(e)]}function an(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function $n(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Un(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function sn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function le(t){var n=wt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function he(t,n){function e(r,i){return r=t(r,i),n(r[0],r[1])}return t.invert&&n.invert&&(e.invert=function(r,i){return r=n.invert(r,i),r&&t.invert(r[0],r[1])}),e}function pe(t,n){return[B(t)>F?t+Math.round(-t/j)*j:t,n]}pe.invert=pe;function Is(t,n,e){return(t%=j)?n||e?he(fr(t),cr(n,e)):fr(t):n||e?cr(n,e):pe}function sr(t){return function(n,e){return n+=t,[n>F?n-j:n<-F?n+j:n,e]}}function fr(t){var n=sr(t);return n.invert=sr(-t),n}function cr(t,n){var e=O(t),r=H(t),i=O(n),o=H(n);function u(a,l){var f=O(l),s=O(a)*f,c=H(a)*f,h=H(l),g=h*e+s*r;return[Ct(c*i-g*o,s*e-h*r),bt(g*i+c*o)]}return u.invert=function(a,l){var f=O(l),s=O(a)*f,c=H(a)*f,h=H(l),g=h*i-c*o;return[Ct(c*i+h*o,s*e+g*r),bt(g*e-s*r)]},u}function Ls(t,n,e,r,i,o){if(!!e){var u=O(n),a=H(n),l=r*e;i==null?(i=n+r*j,o=n-l/2):(i=lr(u,i),o=lr(u,o),(r>0?i<o:i>o)&&(i+=r*j));for(var f,s=i;r>0?s>o:s<o;s-=l)f=ce([u,-a*O(s),-a*H(s)]),t.point(f[0],f[1])}}function lr(t,n){n=It(n),n[0]-=t,le(n);var e=Cs(-n[1]);return((-n[2]<0?-e:e)+j-X)%j}function ui(){var t=[],n;return{point:function(e,r,i){n.push([e,r,i])},lineStart:function(){t.push(n=[])},lineEnd:J,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}}function yn(t,n){return B(t[0]-n[0])<X&&B(t[1]-n[1])<X}function fn(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function ai(t,n,e,r,i){var o=[],u=[],a,l;if(t.forEach(function(v){if(!((E=v.length-1)<=0)){var E,S=v[0],w=v[E],N;if(yn(S,w)){if(!S[2]&&!w[2]){for(i.lineStart(),a=0;a<E;++a)i.point((S=v[a])[0],S[1]);i.lineEnd();return}w[0]+=2*X}o.push(N=new fn(S,v,null,!0)),u.push(N.o=new fn(S,null,N,!1)),o.push(N=new fn(w,v,null,!1)),u.push(N.o=new fn(w,null,N,!0))}}),!!o.length){for(u.sort(n),hr(o),hr(u),a=0,l=u.length;a<l;++a)u[a].e=e=!e;for(var f=o[0],s,c;;){for(var h=f,g=!0;h.v;)if((h=h.n)===f)return;s=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(g)for(a=0,l=s.length;a<l;++a)i.point((c=s[a])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(g)for(s=h.p.z,a=s.length-1;a>=0;--a)i.point((c=s[a])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,s=h.z,g=!g}while(!h.v);i.lineEnd()}}}function hr(t){if(!!(n=t.length)){for(var n,e=0,r=t[0],i;++e<n;)r.n=i=t[e],i.p=r,r=i;r.n=i=t[0],i.p=r}}function Kn(t){return B(t[0])<=F?t[0]:Ps(t[0])*((B(t[0])+F)%j-F)}function Fs(t,n){var e=Kn(n),r=n[1],i=H(r),o=[H(e),-O(e),0],u=0,a=0,l=new St;i===1?r=Q+X:i===-1&&(r=-Q-X);for(var f=0,s=t.length;f<s;++f)if(!!(h=(c=t[f]).length))for(var c,h,g=c[h-1],v=Kn(g),E=g[1]/2+ir,S=H(E),w=O(E),N=0;N<h;++N,v=y,S=b,w=T,g=A){var A=c[N],y=Kn(A),x=A[1]/2+ir,b=H(x),T=O(x),z=y-v,R=z>=0?1:-1,C=R*z,_=C>F,q=S*b;if(l.add(Ct(q*R*H(C),w*T+q*O(C))),u+=_?z+R*j:z,_^v>=e^y>=e){var I=$n(It(g),It(A));le(I);var p=$n(o,I);le(p);var d=(_^z>=0?-1:1)*bt(p[2]);(r>d||r===d&&(I[0]||I[1]))&&(a+=_^z>=0?1:-1)}}return(u<-X||u<X&&l<-zs)^a&1}function si(t,n,e,r){return function(i){var o=n(i),u=ui(),a=n(u),l=!1,f,s,c,h={point:g,lineStart:E,lineEnd:S,polygonStart:function(){h.point=w,h.lineStart=N,h.lineEnd=A,s=[],f=[]},polygonEnd:function(){h.point=g,h.lineStart=E,h.lineEnd=S,s=kr(s);var y=Fs(f,r);s.length?(l||(i.polygonStart(),l=!0),ai(s,qs,y,e,i)):y&&(l||(i.polygonStart(),l=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),s=f=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function g(y,x){t(y,x)&&i.point(y,x)}function v(y,x){o.point(y,x)}function E(){h.point=v,o.lineStart()}function S(){h.point=g,o.lineEnd()}function w(y,x){c.push([y,x]),a.point(y,x)}function N(){a.lineStart(),c=[]}function A(){w(c[0][0],c[0][1]),a.lineEnd();var y=a.clean(),x=u.result(),b,T=x.length,z,R,C;if(c.pop(),f.push(c),c=null,!!T){if(y&1){if(R=x[0],(z=R.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),b=0;b<z;++b)i.point((C=R[b])[0],C[1]);i.lineEnd()}return}T>1&&y&2&&x.push(x.pop().concat(x.shift())),s.push(x.filter(Ds))}}return h}}function Ds(t){return t.length>1}function qs(t,n){return((t=t.x)[0]<0?t[1]-Q-X:Q-t[1])-((n=n.x)[0]<0?n[1]-Q-X:Q-n[1])}const pr=si(function(){return!0},Xs,Os,[-F,-Q]);function Xs(t){var n=NaN,e=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(o,u){var a=o>0?F:-F,l=B(o-n);B(l-F)<X?(t.point(n,e=(e+u)/2>0?Q:-Q),t.point(r,e),t.lineEnd(),t.lineStart(),t.point(a,e),t.point(o,e),i=0):r!==a&&l>=F&&(B(n-r)<X&&(n-=r*X),B(o-a)<X&&(o-=a*X),e=Hs(n,e,o,u),t.point(r,e),t.lineEnd(),t.lineStart(),t.point(a,e),i=0),t.point(n=o,e=u),r=a},lineEnd:function(){t.lineEnd(),n=e=NaN},clean:function(){return 2-i}}}function Hs(t,n,e,r){var i,o,u=H(t-e);return B(u)>X?Rs((H(n)*(o=O(r))*H(e)-H(r)*(i=O(n))*H(t))/(i*o*u)):(n+r)/2}function Os(t,n,e,r){var i;if(t==null)i=e*Q,r.point(-F,i),r.point(0,i),r.point(F,i),r.point(F,0),r.point(F,-i),r.point(0,-i),r.point(-F,-i),r.point(-F,0),r.point(-F,i);else if(B(t[0]-n[0])>X){var o=t[0]<n[0]?F:-F;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}function Ys(t){var n=O(t),e=6*W,r=n>0,i=B(n)>X;function o(s,c,h,g){Ls(g,t,e,h,s,c)}function u(s,c){return O(s)*O(c)>n}function a(s){var c,h,g,v,E;return{lineStart:function(){v=g=!1,E=1},point:function(S,w){var N=[S,w],A,y=u(S,w),x=r?y?0:f(S,w):y?f(S+(S<0?F:-F),w):0;if(!c&&(v=g=y)&&s.lineStart(),y!==g&&(A=l(c,N),(!A||yn(c,A)||yn(N,A))&&(N[2]=1)),y!==g)E=0,y?(s.lineStart(),A=l(N,c),s.point(A[0],A[1])):(A=l(c,N),s.point(A[0],A[1],2),s.lineEnd()),c=A;else if(i&&c&&r^y){var b;!(x&h)&&(b=l(N,c,!0))&&(E=0,r?(s.lineStart(),s.point(b[0][0],b[0][1]),s.point(b[1][0],b[1][1]),s.lineEnd()):(s.point(b[1][0],b[1][1]),s.lineEnd(),s.lineStart(),s.point(b[0][0],b[0][1],3)))}y&&(!c||!yn(c,N))&&s.point(N[0],N[1]),c=N,g=y,h=x},lineEnd:function(){g&&s.lineEnd(),c=null},clean:function(){return E|(v&&g)<<1}}}function l(s,c,h){var g=It(s),v=It(c),E=[1,0,0],S=$n(g,v),w=an(S,S),N=S[0],A=w-N*N;if(!A)return!h&&s;var y=n*w/A,x=-n*N/A,b=$n(E,S),T=sn(E,y),z=sn(S,x);Un(T,z);var R=b,C=an(T,R),_=an(R,R),q=C*C-_*(an(T,T)-1);if(!(q<0)){var I=wt(q),p=sn(R,(-C-I)/_);if(Un(p,T),p=ce(p),!h)return p;var d=s[0],m=c[0],M=s[1],k=c[1],$;m<d&&($=d,d=m,m=$);var P=m-d,L=B(P-F)<X,D=L||P<X;if(!L&&k<M&&($=M,M=k,k=$),D?L?M+k>0^p[1]<(B(p[0]-d)<X?M:k):M<=p[1]&&p[1]<=k:P>F^(d<=p[0]&&p[0]<=m)){var V=sn(R,(-C+I)/_);return Un(V,T),[p,ce(V)]}}}function f(s,c){var h=r?t:F-t,g=0;return s<-h?g|=1:s>h&&(g|=2),c<-h?g|=4:c>h&&(g|=8),g}return si(u,a,o,r?[0,-t]:[-F,t-F])}function Bs(t,n,e,r,i,o){var u=t[0],a=t[1],l=n[0],f=n[1],s=0,c=1,h=l-u,g=f-a,v;if(v=e-u,!(!h&&v>0)){if(v/=h,h<0){if(v<s)return;v<c&&(c=v)}else if(h>0){if(v>c)return;v>s&&(s=v)}if(v=i-u,!(!h&&v<0)){if(v/=h,h<0){if(v>c)return;v>s&&(s=v)}else if(h>0){if(v<s)return;v<c&&(c=v)}if(v=r-a,!(!g&&v>0)){if(v/=g,g<0){if(v<s)return;v<c&&(c=v)}else if(g>0){if(v>c)return;v>s&&(s=v)}if(v=o-a,!(!g&&v<0)){if(v/=g,g<0){if(v>c)return;v>s&&(s=v)}else if(g>0){if(v<s)return;v<c&&(c=v)}return s>0&&(t[0]=u+s*h,t[1]=a+s*g),c<1&&(n[0]=u+c*h,n[1]=a+c*g),!0}}}}}var Ht=1e9,cn=-Ht;function Vs(t,n,e,r){function i(f,s){return t<=f&&f<=e&&n<=s&&s<=r}function o(f,s,c,h){var g=0,v=0;if(f==null||(g=u(f,c))!==(v=u(s,c))||l(f,s)<0^c>0)do h.point(g===0||g===3?t:e,g>1?r:n);while((g=(g+c+4)%4)!==v);else h.point(s[0],s[1])}function u(f,s){return B(f[0]-t)<X?s>0?0:3:B(f[0]-e)<X?s>0?2:1:B(f[1]-n)<X?s>0?1:0:s>0?3:2}function a(f,s){return l(f.x,s.x)}function l(f,s){var c=u(f,1),h=u(s,1);return c!==h?c-h:c===0?s[1]-f[1]:c===1?f[0]-s[0]:c===2?f[1]-s[1]:s[0]-f[0]}return function(f){var s=f,c=ui(),h,g,v,E,S,w,N,A,y,x,b,T={point:z,lineStart:q,lineEnd:I,polygonStart:C,polygonEnd:_};function z(d,m){i(d,m)&&s.point(d,m)}function R(){for(var d=0,m=0,M=g.length;m<M;++m)for(var k=g[m],$=1,P=k.length,L=k[0],D,V,Y=L[0],G=L[1];$<P;++$)D=Y,V=G,L=k[$],Y=L[0],G=L[1],V<=r?G>r&&(Y-D)*(r-V)>(G-V)*(t-D)&&++d:G<=r&&(Y-D)*(r-V)<(G-V)*(t-D)&&--d;return d}function C(){s=c,h=[],g=[],b=!0}function _(){var d=R(),m=b&&d,M=(h=kr(h)).length;(m||M)&&(f.polygonStart(),m&&(f.lineStart(),o(null,null,1,f),f.lineEnd()),M&&ai(h,a,d,o,f),f.polygonEnd()),s=f,h=g=v=null}function q(){T.point=p,g&&g.push(v=[]),x=!0,y=!1,N=A=NaN}function I(){h&&(p(E,S),w&&y&&c.rejoin(),h.push(c.result())),T.point=z,y&&s.lineEnd()}function p(d,m){var M=i(d,m);if(g&&v.push([d,m]),x)E=d,S=m,w=M,x=!1,M&&(s.lineStart(),s.point(d,m));else if(M&&y)s.point(d,m);else{var k=[N=Math.max(cn,Math.min(Ht,N)),A=Math.max(cn,Math.min(Ht,A))],$=[d=Math.max(cn,Math.min(Ht,d)),m=Math.max(cn,Math.min(Ht,m))];Bs(k,$,t,n,e,r)?(y||(s.lineStart(),s.point(k[0],k[1])),s.point($[0],$[1]),M||s.lineEnd(),b=!1):M&&(s.lineStart(),s.point(d,m),b=!1)}N=d,A=m,y=M}return T}}const ge=t=>t;var Wn=new St,de=new St,fi,ci,me,ye,yt={point:J,lineStart:J,lineEnd:J,polygonStart:function(){yt.lineStart=Gs,yt.lineEnd=Ks},polygonEnd:function(){yt.lineStart=yt.lineEnd=yt.point=J,Wn.add(B(de)),de=new St},result:function(){var t=Wn/2;return Wn=new St,t}};function Gs(){yt.point=Us}function Us(t,n){yt.point=li,fi=me=t,ci=ye=n}function li(t,n){de.add(ye*t-me*n),me=t,ye=n}function Ks(){li(fi,ci)}const gr=yt;var Lt=1/0,Tn=Lt,Jt=-Lt,zn=Jt,Ws={point:Zs,lineStart:J,lineEnd:J,polygonStart:J,polygonEnd:J,result:function(){var t=[[Lt,Tn],[Jt,zn]];return Jt=zn=-(Tn=Lt=1/0),t}};function Zs(t,n){t<Lt&&(Lt=t),t>Jt&&(Jt=t),n<Tn&&(Tn=n),n>zn&&(zn=n)}const Rn=Ws;var ve=0,we=0,Ot=0,Pn=0,Cn=0,kt=0,_e=0,xe=0,Yt=0,hi,pi,ot,ut,rt={point:Nt,lineStart:dr,lineEnd:mr,polygonStart:function(){rt.lineStart=js,rt.lineEnd=tf},polygonEnd:function(){rt.point=Nt,rt.lineStart=dr,rt.lineEnd=mr},result:function(){var t=Yt?[_e/Yt,xe/Yt]:kt?[Pn/kt,Cn/kt]:Ot?[ve/Ot,we/Ot]:[NaN,NaN];return ve=we=Ot=Pn=Cn=kt=_e=xe=Yt=0,t}};function Nt(t,n){ve+=t,we+=n,++Ot}function dr(){rt.point=Qs}function Qs(t,n){rt.point=Js,Nt(ot=t,ut=n)}function Js(t,n){var e=t-ot,r=n-ut,i=wt(e*e+r*r);Pn+=i*(ot+t)/2,Cn+=i*(ut+n)/2,kt+=i,Nt(ot=t,ut=n)}function mr(){rt.point=Nt}function js(){rt.point=nf}function tf(){gi(hi,pi)}function nf(t,n){rt.point=gi,Nt(hi=ot=t,pi=ut=n)}function gi(t,n){var e=t-ot,r=n-ut,i=wt(e*e+r*r);Pn+=i*(ot+t)/2,Cn+=i*(ut+n)/2,kt+=i,i=ut*t-ot*n,_e+=i*(ot+t),xe+=i*(ut+n),Yt+=i*3,Nt(ot=t,ut=n)}const yr=rt;function di(t){this._context=t}di.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,j);break}}},result:J};var Se=new St,Zn,mi,yi,Bt,Vt,In={point:J,lineStart:function(){In.point=ef},lineEnd:function(){Zn&&vi(mi,yi),In.point=J},polygonStart:function(){Zn=!0},polygonEnd:function(){Zn=null},result:function(){var t=+Se;return Se=new St,t}};function ef(t,n){In.point=vi,mi=Bt=t,yi=Vt=n}function vi(t,n){Bt-=t,Vt-=n,Se.add(wt(Bt*Bt+Vt*Vt)),Bt=t,Vt=n}const vr=In;function wi(){this._string=[]}wi.prototype={_radius:4.5,_circle:wr(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._string.push("M",t,",",n),this._point=1;break}case 1:{this._string.push("L",t,",",n);break}default:{this._circle==null&&(this._circle=wr(this._radius)),this._string.push("M",t,",",n,this._circle);break}}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}else return null}};function wr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Me(t,n){var e=4.5,r,i;function o(u){return u&&(typeof e=="function"&&i.pointRadius(+e.apply(this,arguments)),At(u,r(i))),i.result()}return o.area=function(u){return At(u,r(gr)),gr.result()},o.measure=function(u){return At(u,r(vr)),vr.result()},o.bounds=function(u){return At(u,r(Rn)),Rn.result()},o.centroid=function(u){return At(u,r(yr)),yr.result()},o.projection=function(u){return arguments.length?(r=u==null?(t=null,ge):(t=u).stream,o):t},o.context=function(u){return arguments.length?(i=u==null?(n=null,new wi):new di(n=u),typeof e!="function"&&i.pointRadius(e),o):n},o.pointRadius=function(u){return arguments.length?(e=typeof u=="function"?u:(i.pointRadius(+u),+u),o):e},o.projection(t).context(n)}function Ce(t){return function(n){var e=new Ee;for(var r in t)e[r]=t[r];return e.stream=n,e}}function Ee(){}Ee.prototype={constructor:Ee,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ie(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),At(e,t.stream(Rn)),n(Rn.result()),r!=null&&t.clipExtent(r),t}function _i(t,n,e){return Ie(t,function(r){var i=n[1][0]-n[0][0],o=n[1][1]-n[0][1],u=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+n[0][0]+(i-u*(r[1][0]+r[0][0]))/2,l=+n[0][1]+(o-u*(r[1][1]+r[0][1]))/2;t.scale(150*u).translate([a,l])},e)}function rf(t,n,e){return _i(t,[[0,0],n],e)}function of(t,n,e){return Ie(t,function(r){var i=+n,o=i/(r[1][0]-r[0][0]),u=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];t.scale(150*o).translate([u,a])},e)}function uf(t,n,e){return Ie(t,function(r){var i=+n,o=i/(r[1][1]-r[0][1]),u=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([u,a])},e)}var _r=16,af=O(30*W);function xr(t,n){return+n?ff(t,n):sf(t)}function sf(t){return Ce({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}function ff(t,n){function e(r,i,o,u,a,l,f,s,c,h,g,v,E,S){var w=f-r,N=s-i,A=w*w+N*N;if(A>4*n&&E--){var y=u+h,x=a+g,b=l+v,T=wt(y*y+x*x+b*b),z=bt(b/=T),R=B(B(b)-1)<X||B(o-c)<X?(o+c)/2:Ct(x,y),C=t(R,z),_=C[0],q=C[1],I=_-r,p=q-i,d=N*I-w*p;(d*d/A>n||B((w*I+N*p)/A-.5)>.3||u*h+a*g+l*v<af)&&(e(r,i,o,u,a,l,_,q,R,y/=T,x/=T,b,E,S),S.point(_,q),e(_,q,R,y,x,b,f,s,c,h,g,v,E,S))}}return function(r){var i,o,u,a,l,f,s,c,h,g,v,E,S={point:w,lineStart:N,lineEnd:y,polygonStart:function(){r.polygonStart(),S.lineStart=x},polygonEnd:function(){r.polygonEnd(),S.lineStart=N}};function w(z,R){z=t(z,R),r.point(z[0],z[1])}function N(){c=NaN,S.point=A,r.lineStart()}function A(z,R){var C=It([z,R]),_=t(z,R);e(c,h,s,g,v,E,c=_[0],h=_[1],s=z,g=C[0],v=C[1],E=C[2],_r,r),r.point(c,h)}function y(){S.point=w,r.lineEnd()}function x(){N(),S.point=b,S.lineEnd=T}function b(z,R){A(i=z,R),o=c,u=h,a=g,l=v,f=E,S.point=A}function T(){e(c,h,s,g,v,E,o,u,i,a,l,f,_r,r),S.lineEnd=y,y()}return S}}var cf=Ce({point:function(t,n){this.stream.point(t*W,n*W)}});function lf(t){return Ce({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}function hf(t,n,e,r,i){function o(u,a){return u*=r,a*=i,[n+t*u,e-t*a]}return o.invert=function(u,a){return[(u-n)/t*r,(e-a)/t*i]},o}function Sr(t,n,e,r,i,o){if(!o)return hf(t,n,e,r,i);var u=O(o),a=H(o),l=u*t,f=a*t,s=u/t,c=a/t,h=(a*e-u*n)/t,g=(a*n+u*e)/t;function v(E,S){return E*=r,S*=i,[l*E-f*S+n,e-f*E-l*S]}return v.invert=function(E,S){return[r*(s*E-c*S+h),i*(g-c*E-s*S)]},v}function pf(t){return gf(function(){return t})()}function gf(t){var n,e=150,r=480,i=250,o=0,u=0,a=0,l=0,f=0,s,c=0,h=1,g=1,v=null,E=pr,S=null,w,N,A,y=ge,x=.5,b,T,z,R,C;function _(d){return z(d[0]*W,d[1]*W)}function q(d){return d=z.invert(d[0],d[1]),d&&[d[0]*ht,d[1]*ht]}_.stream=function(d){return R&&C===d?R:R=cf(lf(s)(E(b(y(C=d)))))},_.preclip=function(d){return arguments.length?(E=d,v=void 0,p()):E},_.postclip=function(d){return arguments.length?(y=d,S=w=N=A=null,p()):y},_.clipAngle=function(d){return arguments.length?(E=+d?Ys(v=d*W):(v=null,pr),p()):v*ht},_.clipExtent=function(d){return arguments.length?(y=d==null?(S=w=N=A=null,ge):Vs(S=+d[0][0],w=+d[0][1],N=+d[1][0],A=+d[1][1]),p()):S==null?null:[[S,w],[N,A]]},_.scale=function(d){return arguments.length?(e=+d,I()):e},_.translate=function(d){return arguments.length?(r=+d[0],i=+d[1],I()):[r,i]},_.center=function(d){return arguments.length?(o=d[0]%360*W,u=d[1]%360*W,I()):[o*ht,u*ht]},_.rotate=function(d){return arguments.length?(a=d[0]%360*W,l=d[1]%360*W,f=d.length>2?d[2]%360*W:0,I()):[a*ht,l*ht,f*ht]},_.angle=function(d){return arguments.length?(c=d%360*W,I()):c*ht},_.reflectX=function(d){return arguments.length?(h=d?-1:1,I()):h<0},_.reflectY=function(d){return arguments.length?(g=d?-1:1,I()):g<0},_.precision=function(d){return arguments.length?(b=xr(T,x=d*d),p()):wt(x)},_.fitExtent=function(d,m){return _i(_,d,m)},_.fitSize=function(d,m){return rf(_,d,m)},_.fitWidth=function(d,m){return of(_,d,m)},_.fitHeight=function(d,m){return uf(_,d,m)};function I(){var d=Sr(e,0,0,h,g,c).apply(null,n(o,u)),m=Sr(e,r-d[0],i-d[1],h,g,c);return s=Is(a,l,f),T=he(n,m),z=he(s,T),b=xr(T,x),p()}function p(){return R=C=null,_}return function(){return n=t.apply(this,arguments),_.invert=n.invert&&q,I()}}function df(t){return function(n,e){var r=wt(n*n+e*e),i=t(r),o=H(i),u=O(i);return[Ct(n*o,r*u),bt(r&&e*o/r)]}}function xi(t,n){return[O(n)*H(t),H(n)]}xi.invert=df(bt);function mf(){return pf(xi).scale(249.5).clipAngle(90+X)}function yf(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}function vf(t,n){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof n=="function"?this.interpolator(n):this.range(n);break}}return this}function wf(t){return function(){return t}}function _f(t){return+t}var Mr=[0,1];function vt(t){return t}function be(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:wf(isNaN(n)?NaN:.5)}function xf(t,n){var e;return t>n&&(e=t,t=n,n=e),function(r){return Math.max(t,Math.min(n,r))}}function Sf(t,n,e){var r=t[0],i=t[1],o=n[0],u=n[1];return i<r?(r=be(i,r),o=e(u,o)):(r=be(r,i),o=e(o,u)),function(a){return o(r(a))}}function Mf(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),o=new Array(r),u=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++u<r;)i[u]=be(t[u],t[u+1]),o[u]=e(n[u],n[u+1]);return function(a){var l=Ii(t,a,1,r)-1;return o[l](i[l](a))}}function Ef(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function bf(){var t=Mr,n=Mr,e=Xn,r,i,o,u=vt,a,l,f;function s(){var h=Math.min(t.length,n.length);return u!==vt&&(u=xf(t[0],t[h-1])),a=h>2?Mf:Sf,l=f=null,c}function c(h){return h==null||isNaN(h=+h)?o:(l||(l=a(t.map(r),n,e)))(r(u(h)))}return c.invert=function(h){return u(i((f||(f=a(n,t.map(r),nt)))(h)))},c.domain=function(h){return arguments.length?(t=Array.from(h,_f),s()):t.slice()},c.range=function(h){return arguments.length?(n=Array.from(h),s()):n.slice()},c.rangeRound=function(h){return n=Array.from(h),e=Ur,s()},c.clamp=function(h){return arguments.length?(u=h?!0:vt,s()):u!==vt},c.interpolate=function(h){return arguments.length?(e=h,s()):e},c.unknown=function(h){return arguments.length?(o=h,c):o},function(h,g){return r=h,i=g,s()}}function Nf(){return bf()(vt,vt)}function Af(t,n,e,r){var i=Fi(t,n,e),o;switch(r=An(r==null?",f":r),r.type){case"s":{var u=Math.max(Math.abs(t),Math.abs(n));return r.precision==null&&!isNaN(o=$s(i,u))&&(r.precision=o),oi(r,u)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Ts(i,Math.max(Math.abs(t),Math.abs(n))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=ks(i))&&(r.precision=o-(r.type==="%")*2);break}}return ii(r)}function Si(t){var n=t.domain;return t.ticks=function(e){var r=n();return Li(r[0],r[r.length-1],e==null?10:e)},t.tickFormat=function(e,r){var i=n();return Af(i[0],i[i.length-1],e==null?10:e,r)},t.nice=function(e){e==null&&(e=10);var r=n(),i=0,o=r.length-1,u=r[i],a=r[o],l,f,s=10;for(a<u&&(f=u,u=a,a=f,f=i,i=o,o=f);s-- >0;){if(f=Ar(u,a,e),f===l)return r[i]=u,r[o]=a,n(r);if(f>0)u=Math.floor(u/f)*f,a=Math.ceil(a/f)*f;else if(f<0)u=Math.ceil(u*f)/f,a=Math.floor(a*f)/f;else break;l=f}return t},t}function Mi(){var t=Nf();return t.copy=function(){return Ef(t,Mi())},yf.apply(t,arguments),Si(t)}function kf(){var t=0,n=1,e,r,i,o,u=vt,a=!1,l;function f(c){return c==null||isNaN(c=+c)?l:u(i===0?.5:(c=(o(c)-e)*i,a?Math.max(0,Math.min(1,c)):c))}f.domain=function(c){return arguments.length?([t,n]=c,e=o(t=+t),r=o(n=+n),i=e===r?0:1/(r-e),f):[t,n]},f.clamp=function(c){return arguments.length?(a=!!c,f):a},f.interpolator=function(c){return arguments.length?(u=c,f):u};function s(c){return function(h){var g,v;return arguments.length?([g,v]=h,u=c(g,v),f):[u(0),u(1)]}}return f.range=s(Xn),f.rangeRound=s(Ur),f.unknown=function(c){return arguments.length?(l=c,f):l},function(c){return o=c,e=c(t),r=c(n),i=e===r?0:1/(r-e),f}}function $f(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Ei(){var t=Si(kf()(vt));return t.copy=function(){return $f(t,Ei())},vf.apply(t,arguments)}function Tf(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(r*6,++r*6);return e}const zf=t=>Gu(t[t.length-1]);var Rf=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Tf);const Pf=zf(Rf),ln=t=>()=>t;function Cf(t,{sourceEvent:n,target:e,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function dt(t,n,e){this.k=t,this.x=n,this.y=e}dt.prototype={constructor:dt,scale:function(t){return t===1?this:new dt(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new dt(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var bi=new dt(1,0,0);dt.prototype;function Qn(t){t.stopImmediatePropagation()}function Dt(t){t.preventDefault(),t.stopImmediatePropagation()}function If(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Lf(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Er(){return this.__zoom||bi}function Ff(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Df(){return navigator.maxTouchPoints||"ontouchstart"in this}function qf(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],u=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),u>o?(o+u)/2:Math.min(0,o)||Math.max(0,u))}function Xf(){var t=If,n=Lf,e=qf,r=Ff,i=Df,o=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],a=250,l=aa,f=Dn("start","zoom","end"),s,c,h,g=500,v=150,E=0,S=10;function w(p){p.property("__zoom",Er).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",C).filter(i).on("touchstart.zoom",_).on("touchmove.zoom",q).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(p,d,m,M){var k=p.selection?p.selection():p;k.property("__zoom",Er),p!==k?x(p,d,m,M):k.interrupt().each(function(){b(this,arguments).event(M).start().zoom(null,typeof d=="function"?d.apply(this,arguments):d).end()})},w.scaleBy=function(p,d,m,M){w.scaleTo(p,function(){var k=this.__zoom.k,$=typeof d=="function"?d.apply(this,arguments):d;return k*$},m,M)},w.scaleTo=function(p,d,m,M){w.transform(p,function(){var k=n.apply(this,arguments),$=this.__zoom,P=m==null?y(k):typeof m=="function"?m.apply(this,arguments):m,L=$.invert(P),D=typeof d=="function"?d.apply(this,arguments):d;return e(A(N($,D),P,L),k,u)},m,M)},w.translateBy=function(p,d,m,M){w.transform(p,function(){return e(this.__zoom.translate(typeof d=="function"?d.apply(this,arguments):d,typeof m=="function"?m.apply(this,arguments):m),n.apply(this,arguments),u)},null,M)},w.translateTo=function(p,d,m,M,k){w.transform(p,function(){var $=n.apply(this,arguments),P=this.__zoom,L=M==null?y($):typeof M=="function"?M.apply(this,arguments):M;return e(bi.translate(L[0],L[1]).scale(P.k).translate(typeof d=="function"?-d.apply(this,arguments):-d,typeof m=="function"?-m.apply(this,arguments):-m),$,u)},M,k)};function N(p,d){return d=Math.max(o[0],Math.min(o[1],d)),d===p.k?p:new dt(d,p.x,p.y)}function A(p,d,m){var M=d[0]-m[0]*p.k,k=d[1]-m[1]*p.k;return M===p.x&&k===p.y?p:new dt(p.k,M,k)}function y(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function x(p,d,m,M){p.on("start.zoom",function(){b(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(M).end()}).tween("zoom",function(){var k=this,$=arguments,P=b(k,$).event(M),L=n.apply(k,$),D=m==null?y(L):typeof m=="function"?m.apply(k,$):m,V=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),Y=k.__zoom,G=typeof d=="function"?d.apply(k,$):d,ft=l(Y.invert(D).concat(V/Y.k),G.invert(D).concat(V/G.k));return function(tt){if(tt===1)tt=G;else{var ct=ft(tt),Yn=V/ct[2];tt=new dt(Yn,D[0]-ct[0]*Yn,D[1]-ct[1]*Yn)}P.zoom(null,tt)}})}function b(p,d,m){return!m&&p.__zooming||new T(p,d)}function T(p,d){this.that=p,this.args=d,this.active=0,this.sourceEvent=null,this.extent=n.apply(p,d),this.taps=0}T.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,d){return this.mouse&&p!=="mouse"&&(this.mouse[1]=d.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=d.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=d.invert(this.touch1[0])),this.that.__zoom=d,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var d=U(this.that).datum();f.call(p,this.that,new Cf(p,{sourceEvent:this.sourceEvent,target:w,type:p,transform:this.that.__zoom,dispatch:f}),d)}};function z(p,...d){if(!t.apply(this,arguments))return;var m=b(this,d).event(p),M=this.__zoom,k=Math.max(o[0],Math.min(o[1],M.k*Math.pow(2,r.apply(this,arguments)))),$=pt(p);if(m.wheel)(m.mouse[0][0]!==$[0]||m.mouse[0][1]!==$[1])&&(m.mouse[1]=M.invert(m.mouse[0]=$)),clearTimeout(m.wheel);else{if(M.k===k)return;m.mouse=[$,M.invert($)],mn(this),m.start()}Dt(p),m.wheel=setTimeout(P,v),m.zoom("mouse",e(A(N(M,k),m.mouse[0],m.mouse[1]),m.extent,u));function P(){m.wheel=null,m.end()}}function R(p,...d){if(h||!t.apply(this,arguments))return;var m=p.currentTarget,M=b(this,d,!0).event(p),k=U(p.view).on("mousemove.zoom",D,!0).on("mouseup.zoom",V,!0),$=pt(p,m),P=p.clientX,L=p.clientY;Hr(p.view),Qn(p),M.mouse=[$,this.__zoom.invert($)],mn(this),M.start();function D(Y){if(Dt(Y),!M.moved){var G=Y.clientX-P,ft=Y.clientY-L;M.moved=G*G+ft*ft>E}M.event(Y).zoom("mouse",e(A(M.that.__zoom,M.mouse[0]=pt(Y,m),M.mouse[1]),M.extent,u))}function V(Y){k.on("mousemove.zoom mouseup.zoom",null),Or(Y.view,M.moved),Dt(Y),M.event(Y).end()}}function C(p,...d){if(!!t.apply(this,arguments)){var m=this.__zoom,M=pt(p.changedTouches?p.changedTouches[0]:p,this),k=m.invert(M),$=m.k*(p.shiftKey?.5:2),P=e(A(N(m,$),M,k),n.apply(this,d),u);Dt(p),a>0?U(this).transition().duration(a).call(x,P,M,p):U(this).call(w.transform,P,M,p)}}function _(p,...d){if(!!t.apply(this,arguments)){var m=p.touches,M=m.length,k=b(this,d,p.changedTouches.length===M).event(p),$,P,L,D;for(Qn(p),P=0;P<M;++P)L=m[P],D=pt(L,this),D=[D,this.__zoom.invert(D),L.identifier],k.touch0?!k.touch1&&k.touch0[2]!==D[2]&&(k.touch1=D,k.taps=0):(k.touch0=D,$=!0,k.taps=1+!!s);s&&(s=clearTimeout(s)),$&&(k.taps<2&&(c=D[0],s=setTimeout(function(){s=null},g)),mn(this),k.start())}}function q(p,...d){if(!!this.__zooming){var m=b(this,d).event(p),M=p.changedTouches,k=M.length,$,P,L,D;for(Dt(p),$=0;$<k;++$)P=M[$],L=pt(P,this),m.touch0&&m.touch0[2]===P.identifier?m.touch0[0]=L:m.touch1&&m.touch1[2]===P.identifier&&(m.touch1[0]=L);if(P=m.that.__zoom,m.touch1){var V=m.touch0[0],Y=m.touch0[1],G=m.touch1[0],ft=m.touch1[1],tt=(tt=G[0]-V[0])*tt+(tt=G[1]-V[1])*tt,ct=(ct=ft[0]-Y[0])*ct+(ct=ft[1]-Y[1])*ct;P=N(P,Math.sqrt(tt/ct)),L=[(V[0]+G[0])/2,(V[1]+G[1])/2],D=[(Y[0]+ft[0])/2,(Y[1]+ft[1])/2]}else if(m.touch0)L=m.touch0[0],D=m.touch0[1];else return;m.zoom("touch",e(A(P,L,D),m.extent,u))}}function I(p,...d){if(!!this.__zooming){var m=b(this,d).event(p),M=p.changedTouches,k=M.length,$,P;for(Qn(p),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),$=0;$<k;++$)P=M[$],m.touch0&&m.touch0[2]===P.identifier?delete m.touch0:m.touch1&&m.touch1[2]===P.identifier&&delete m.touch1;if(m.touch1&&!m.touch0&&(m.touch0=m.touch1,delete m.touch1),m.touch0)m.touch0[1]=this.__zoom.invert(m.touch0[0]);else if(m.end(),m.taps===2&&(P=pt(P,this),Math.hypot(c[0]-P[0],c[1]-P[1])<S)){var L=U(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return w.wheelDelta=function(p){return arguments.length?(r=typeof p=="function"?p:ln(+p),w):r},w.filter=function(p){return arguments.length?(t=typeof p=="function"?p:ln(!!p),w):t},w.touchable=function(p){return arguments.length?(i=typeof p=="function"?p:ln(!!p),w):i},w.extent=function(p){return arguments.length?(n=typeof p=="function"?p:ln([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),w):n},w.scaleExtent=function(p){return arguments.length?(o[0]=+p[0],o[1]=+p[1],w):[o[0],o[1]]},w.translateExtent=function(p){return arguments.length?(u[0][0]=+p[0][0],u[1][0]=+p[1][0],u[0][1]=+p[0][1],u[1][1]=+p[1][1],w):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},w.constrain=function(p){return arguments.length?(e=p,w):e},w.duration=function(p){return arguments.length?(a=+p,w):a},w.interpolate=function(p){return arguments.length?(l=p,w):l},w.on=function(){var p=f.on.apply(f,arguments);return p===f?w:p},w.clickDistance=function(p){return arguments.length?(E=(p=+p)*p,w):Math.sqrt(E)},w.tapDistance=function(p){return arguments.length?(S=+p,w):S},w}function Hf(t){return t}function Of(t){if(t==null)return Hf;var n,e,r=t.scale[0],i=t.scale[1],o=t.translate[0],u=t.translate[1];return function(a,l){l||(n=e=0);var f=2,s=a.length,c=new Array(s);for(c[0]=(n+=a[0])*r+o,c[1]=(e+=a[1])*i+u;f<s;)c[f]=a[f],++f;return c}}function Yf(t,n){for(var e,r=t.length,i=r-n;i<--r;)e=t[i],t[i++]=t[r],t[r]=e}function Bf(t,n){return n.type==="GeometryCollection"?{type:"FeatureCollection",features:n.geometries.map(function(e){return br(t,e)})}:br(t,n)}function br(t,n){var e=n.id,r=n.bbox,i=n.properties==null?{}:n.properties,o=Vf(t,n);return e==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:e,properties:i,geometry:o}:{type:"Feature",id:e,bbox:r,properties:i,geometry:o}}function Vf(t,n){var e=Of(t.transform),r=t.arcs;function i(s,c){c.length&&c.pop();for(var h=r[s<0?~s:s],g=0,v=h.length;g<v;++g)c.push(e(h[g],g));s<0&&Yf(c,v)}function o(s){return e(s)}function u(s){for(var c=[],h=0,g=s.length;h<g;++h)i(s[h],c);return c.length<2&&c.push(c[0]),c}function a(s){for(var c=u(s);c.length<4;)c.push(c[0]);return c}function l(s){return s.map(a)}function f(s){var c=s.type,h;switch(c){case"GeometryCollection":return{type:c,geometries:s.geometries.map(f)};case"Point":h=o(s.coordinates);break;case"MultiPoint":h=s.coordinates.map(o);break;case"LineString":h=u(s.arcs);break;case"MultiLineString":h=s.arcs.map(u);break;case"Polygon":h=l(s.arcs);break;case"MultiPolygon":h=s.arcs.map(l);break;default:return null}return{type:c,coordinates:h}}return f(n)}document.addEventListener("contextmenu",t=>t.preventDefault());let Ln;const Gf=document.getElementById("yearRange");Gf.addEventListener("change",Uf);function Uf(t){se(`./datasets/${this.value}.json`).then(n=>{Ln=n,ki.selectAll("path").attr("fill",$i)})}const Kf=document.getElementById("mapContainer"),Le=Kf.clientWidth,Fn=600,Wf=75,gt=mf().scale(Fn/2.1).center([0,0]).rotate([0,0]).translate([Le/2,Fn/2]),Ni=gt.scale();let Gt=Me().projection(gt);const Ut=U("#mapContainer").append("svg").attr("width",Le).attr("height",Fn),Zf=Ut.append("circle").attr("cx",Le/2).attr("cy",Fn/2).attr("r",Ni);Ut.call(Au().on("drag",function(t){const n=gt.rotate(),e=Wf/gt.scale();gt.rotate([n[0]+t.dx*e,n[1]-t.dy*e]),Gt=Me().projection(gt),Ut.selectAll("path").attr("d",Gt)})).call(Xf().on("zoom",function(t){t.transform.k>.3?(gt.scale(Ni*t.transform.k),Gt=Me().projection(gt),Ut.selectAll("path").attr("d",Gt),Zf.attr("r",gt.scale())):t.transform.k=.3}).filter(t=>t.type!=="dblclick"));const Ai=Pf;jf();const ki=Ut.append("g");var Qf=function(t,n){U("#countryName").text(n.properties.name),U(this).attr("stroke-width: 1")},Jf=function(t,n){U("#countryName").text("No country selected")};Promise.all([se("https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json"),se("./datasets/2015.json")]).then(([t,n])=>{const e=Bf(t,t.objects.countries);Ln=n,ki.selectAll("path").data(e.features).enter().append("path").attr("class",r=>"country_"+r.properties.name.replace(" ","_")).attr("d",Gt).attr("fill",$i).on("dblclick",Qf).on("contextmenu",Jf)});function $i(t){return t.properties.name in Ln?Ai(Ln[t.properties.name]["Happiness Score"]/10):"darkgrey"}function jf(){const e=Ei().interpolator(Ai).domain([0,99]),r=Mi().domain([0,99]).range([0,150]);U("#legendBar").attr("width",150).attr("height",20).selectAll("rect").data(Array.from(Array(100).keys())).enter().append("rect").attr("x",i=>Math.floor(r(i))).attr("y",0).attr("height",20).attr("width",i=>i==99?6:Math.floor(r(i+1))-Math.floor(r(i))+1).attr("fill",i=>e(i))}
